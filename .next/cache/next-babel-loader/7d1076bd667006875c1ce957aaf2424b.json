{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport Axios from 'axios';\nimport country_list from '../../Data/Country_List';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { useRouter } from 'next/router';\n\nconst CompanyReg = props => {\n  const router = useRouter();\n  const context = useContext(AlertContext);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: docsList\n  } = useState(['DNI', 'CE', 'Passport']); // console.log(props);\n\n  useEffect(() => {\n    window.onpopstate = function (event) {\n      window.location.href = '/';\n    };\n  }, []);\n\n  const handleRegister = async e => {\n    e.preventDefault();\n    setLoading(true); // console.log(props);\n\n    const {\n      firstName,\n      secondName,\n      lastName,\n      password,\n      birthDate,\n      email,\n      phone,\n      nationality,\n      motherLastName,\n      doctype,\n      dni,\n      accountType\n    } = props.values;\n    const body = {\n      name: firstName,\n      email: email,\n      password: password\n    }; // console.log(body, 'body');\n\n    try {\n      const res = await Axios.post('https://api.moni.pe/api/users', body); // console.log('res of /api/users', res);\n\n      const token = res.data.token;\n      const header = {\n        headers: {\n          'x-auth-token': token\n        }\n      }; // console.log(res.headers);\n\n      const body2 = {\n        firstName,\n        secondName,\n        lastName,\n        birthDate,\n        email,\n        phone,\n        nationality,\n        doctype,\n        dni,\n        accountType,\n        motherLastName\n      }; // console.log('body2', body2);\n\n      try {\n        const res1 = await Axios.post('https://api.moni.pe/api/profiles', body2, header); // console.log('res of profiles', res1);\n      } catch (error) {\n        context.setAlert('Detalles de perfil no válidos', 'danger');\n      }\n\n      Cookies.set('token', res.data.token);\n      document.cookie = `type=${'user'};token=${res.data.token};path=/`;\n      document.cookie = `token=${res.data.token};path=/`; // console.log('pushing state..');\n\n      window.location.href = '/';\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      context.setAlert('Correo electrónico ya tomado', 'danger');\n    }\n  };\n\n  if (loading === true) {\n    return __jsx(\"div\", {\n      className: \"page-loader\"\n    }, __jsx(\"div\", {\n      className: \"loader\"\n    }, \"Cargando...\"));\n  }\n\n  return __jsx(\"section\", {\n    className: \"page-section pt-20 pb-0\"\n  }, __jsx(\"div\", {\n    className: \"home-content container\"\n  }, __jsx(\"div\", {\n    className: \"home-text\"\n  }, __jsx(\"div\", {\n    className: \"container align-center\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-sm-12 col\"\n  }, __jsx(\"form\", {\n    className: \"form white\"\n  }, __jsx(\"img\", {\n    src: \"images/logo-moni.png\",\n    alt: \"Moni\",\n    width: \"150px\"\n  }), __jsx(\"h1\", {\n    className: \"section-title pt-80 pt-xs-40 mb-40 mb-sm-40\"\n  }, \"Registro de usuario\"), __jsx(\"div\", {\n    className: \"col-md-4 mb-40 mb-xs-20\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"firstName\",\n    id: \"usuario\",\n    className: \"input-sm bold\",\n    placeholder: \"* Primer nomnbre\",\n    pattern: \".{3,100}\",\n    value: props.values.firstName,\n    onChange: props.handleChange('firstName')\n  })), __jsx(\"div\", {\n    className: \"col-md-4 mb-40  mb-xs-20\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"lastName\",\n    id: \"apellido2\",\n    className: \"input-sm bold\",\n    placeholder: \"* Apellido paterno\",\n    pattern: \".{3,100}\",\n    value: props.values.lastName,\n    onChange: props.handleChange('lastName')\n  })), __jsx(\"div\", {\n    className: \"col-md-5 mb-20  mb-xs-0\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    id: \"contrasena\",\n    className: \"input-sm bold\",\n    placeholder: \"* Contrase\\xF1a\",\n    pattern: \".{3,100}\",\n    value: props.values.password,\n    onChange: props.handleChange('password')\n  }), __jsx(\"i\", {\n    className: \"fa fa-eye fa-2x campoform\"\n  })), __jsx(\"div\", {\n    className: \"col-md-3 mb-20\"\n  }, __jsx(\"select\", {\n    className: \"input-sm form\",\n    onChange: props.handleChange('doctype'),\n    value: props.values.doctype\n  }, __jsx(\"option\", {\n    defaultValue: true\n  }, \"Tipo de documento\"), docsList.map((type, index) => {\n    return __jsx(\"option\", {\n      key: index,\n      value: type\n    }, type);\n  }))), __jsx(\"div\", {\n    className: \"col-md-4 mb-20  mb-xs-20\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"documento\",\n    id: \"documento\",\n    className: \"input-sm bold\",\n    placeholder: \"N\\xBA de documento\",\n    pattern: \".{3,100}\",\n    value: props.values.dni,\n    onChange: props.handleChange('dni')\n  })), __jsx(\"div\", {\n    className: \"col-md-8 mb-20\"\n  }, __jsx(\"select\", {\n    className: \"input-sm form\",\n    defaultValue: props.values.nationality,\n    onChange: props.handleChange('nationality')\n  }, __jsx(\"option\", {\n    defaultValue: true\n  }, \"Nacionalidad\"), country_list.map((country, index) => {\n    return __jsx(\"option\", {\n      key: index,\n      value: country\n    }, country);\n  }))), __jsx(\"div\", {\n    className: \"col-md-4 mb-20\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"company\",\n    id: \"company\",\n    className: \"input-sm bold\",\n    placeholder: \"Nombre De Empresa\",\n    pattern: \".{3,100}\",\n    value: props.values.phone,\n    onChange: props.handleChange('company')\n  })), __jsx(\"div\", {\n    className: \"col-md-4 mb-20 mb-xs-0\"\n  }, __jsx(\"input\", {\n    type: \"tel\",\n    name: \"ruc\",\n    id: \"ruc\",\n    className: \"input-sm bold\",\n    placeholder: \"RUC\",\n    pattern: \".{3,100}\",\n    value: props.values.phone,\n    onChange: props.handleChange('ruc')\n  })), __jsx(\"div\", {\n    className: \"col-md-3 mb-20  mb-xs-0\"\n  }, __jsx(\"input\", {\n    type: \"tel\",\n    name: \"tetefono\",\n    id: \"tetefono\",\n    className: \"input-sm bold\",\n    placeholder: \"N\\xFAmero telef\\xF3nico\",\n    pattern: \".{3,100}\",\n    value: props.values.phone,\n    onChange: props.handleChange('phone')\n  }), __jsx(\"i\", {\n    className: \"fa fa-phone fa-2x campoform\"\n  })), __jsx(\"div\", {\n    className: \"col-md-5 mb-20  mb-xs-0\"\n  }, __jsx(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    id: \"email\",\n    className: \"input-sm bold\",\n    placeholder: \"Email\",\n    pattern: \".{3,100}\",\n    value: props.values.email,\n    onChange: props.handleChange('email')\n  }), __jsx(\"i\", {\n    className: \"fa fa-envelope fa-2x campoform\"\n  })), __jsx(\"div\", {\n    className: \"col-md-12 mb-20\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-mod btn-color btn-border-w btn-large btn-circle mb-20\",\n    onClick: handleRegister\n  }, \"e Registrarme\")), __jsx(\"div\", {\n    className: \"col-md-12 mb-20\"\n  }, __jsx(\"a\", {\n    href: \"#\"\n  }, \"\\xBFOlvidaste tu contrase\\xF1a?\"), __jsx(\"p\", {\n    className: \"mt-20\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"inlineCheckbox1\",\n    value: \"check\"\n  }), ' ', \"Al registrarte, aceptas nuestros\", ' ', __jsx(\"a\", {\n    href: \"#\"\n  }, \"T\\xE9rminos y Condiciones\"), \" y\", ' ', __jsx(\"a\", {\n    href: \"#\"\n  }, \"Pol\\xEDticas de usos de Datos\"), \".\")))))))));\n};\n\nexport default CompanyReg;","map":{"version":3,"sources":["E:/work/next-express/client/components/Register/CompanyReg.js"],"names":["React","useContext","useState","useEffect","Cookies","Axios","country_list","AlertContext","Router","useRouter","CompanyReg","props","router","context","loading","setLoading","docsList","window","onpopstate","event","location","href","handleRegister","e","preventDefault","firstName","secondName","lastName","password","birthDate","email","phone","nationality","motherLastName","doctype","dni","accountType","values","body","name","res","post","token","data","header","headers","body2","res1","error","setAlert","set","document","cookie","handleChange","map","type","index","country"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport Axios from 'axios';\nimport country_list from '../../Data/Country_List';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { useRouter } from 'next/router';\n\nconst CompanyReg = props => {\n\tconst router = useRouter();\n\tconst context = useContext(AlertContext);\n\tconst [loading, setLoading] = useState(false);\n\tconst [docsList] = useState(['DNI', 'CE', 'Passport']);\n\t// console.log(props);\n\tuseEffect(() => {\n\t\twindow.onpopstate = function (event) {\n\t\t\twindow.location.href = '/';\n\t\t};\n\t}, []);\n\tconst handleRegister = async e => {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\n\t\t// console.log(props);\n\t\tconst {\n\t\t\tfirstName,\n\t\t\tsecondName,\n\t\t\tlastName,\n\t\t\tpassword,\n\t\t\tbirthDate,\n\t\t\temail,\n\t\t\tphone,\n\t\t\tnationality,\n\t\t\tmotherLastName,\n\t\t\tdoctype,\n\t\t\tdni,\n\t\t\taccountType,\n\t\t} = props.values;\n\n\t\tconst body = { name: firstName, email: email, password: password };\n\n\t\t// console.log(body, 'body');\n\t\ttry {\n\t\t\tconst res = await Axios.post('https://api.moni.pe/api/users', body);\n\t\t\t// console.log('res of /api/users', res);\n\t\t\tconst token = res.data.token;\n\t\t\tconst header = {\n\t\t\t\theaders: {\n\t\t\t\t\t'x-auth-token': token,\n\t\t\t\t},\n\t\t\t};\n\t\t\t// console.log(res.headers);\n\t\t\tconst body2 = {\n\t\t\t\tfirstName,\n\t\t\t\tsecondName,\n\t\t\t\tlastName,\n\t\t\t\tbirthDate,\n\t\t\t\temail,\n\t\t\t\tphone,\n\t\t\t\tnationality,\n\t\t\t\tdoctype,\n\t\t\t\tdni,\n\t\t\t\taccountType,\n\t\t\t\tmotherLastName,\n\t\t\t};\n\t\t\t// console.log('body2', body2);\n\t\t\ttry {\n\t\t\t\tconst res1 = await Axios.post(\n\t\t\t\t\t'https://api.moni.pe/api/profiles',\n\t\t\t\t\tbody2,\n\t\t\t\t\theader\n\t\t\t\t);\n\t\t\t\t// console.log('res of profiles', res1);\n\t\t\t} catch (error) {\n\t\t\t\tcontext.setAlert('Detalles de perfil no válidos', 'danger');\n\t\t\t}\n\n\t\t\tCookies.set('token', res.data.token);\n\t\t\tdocument.cookie = `type=${'user'};token=${res.data.token};path=/`;\n\t\t\tdocument.cookie = `token=${res.data.token};path=/`;\n\t\t\t// console.log('pushing state..');\n\t\t\twindow.location.href = '/';\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tsetLoading(false);\n\t\t\tcontext.setAlert('Correo electrónico ya tomado', 'danger');\n\t\t}\n\t};\n\n\tif (loading === true) {\n\t\treturn (\n\t\t\t<div className='page-loader'>\n\t\t\t\t<div className='loader'>Cargando...</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<section className='page-section pt-20 pb-0'>\n\t\t\t<div className='home-content container'>\n\t\t\t\t<div className='home-text'>\n\t\t\t\t\t<div className='container align-center'>\n\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t<div className='col-sm-12 col'>\n\t\t\t\t\t\t\t\t<form className='form white'>\n\t\t\t\t\t\t\t\t\t<img src='images/logo-moni.png' alt='Moni' width='150px' />\n\t\t\t\t\t\t\t\t\t<h1 className='section-title pt-80 pt-xs-40 mb-40 mb-sm-40'>\n\t\t\t\t\t\t\t\t\t\tRegistro de usuario\n\t\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t\t<div className='col-md-4 mb-40 mb-xs-20'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tname='firstName'\n\t\t\t\t\t\t\t\t\t\t\tid='usuario'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='* Primer nomnbre'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.firstName}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('firstName')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <div className=\"col-md-4  mb-40  mb-xs-20\">\n                    <input\n                      type=\"text\"\n                      name=\"secondName\"\n                      id=\"apellido1\"\n                      className=\"input-sm bold\"\n                      placeholder=\"Segundo nombre\"\n                      pattern=\".{3,100}\"\n                      value={props.values.secondName}\n                      onChange={props.handleChange(\"secondName\")}\n                    />\n                  </div> */}\n\t\t\t\t\t\t\t\t\t<div className='col-md-4 mb-40  mb-xs-20'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tname='lastName'\n\t\t\t\t\t\t\t\t\t\t\tid='apellido2'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='* Apellido paterno'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.lastName}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('lastName')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-5 mb-20  mb-xs-0'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\t\t\t\tid='contrasena'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='* Contraseña'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.password}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('password')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<i className='fa fa-eye fa-2x campoform'></i>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-3 mb-20'>\n\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm form'\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('doctype')}\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.doctype}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<option defaultValue>Tipo de documento</option>\n\t\t\t\t\t\t\t\t\t\t\t{docsList.map((type, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={index} value={type}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-4 mb-20  mb-xs-20'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tname='documento'\n\t\t\t\t\t\t\t\t\t\t\tid='documento'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Nº de documento'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.dni}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('dni')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-8 mb-20'>\n\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm form'\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={props.values.nationality}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('nationality')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<option defaultValue>Nacionalidad</option>\n\t\t\t\t\t\t\t\t\t\t\t{country_list.map((country, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={index} value={country}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{country}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-4 mb-20'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tname='company'\n\t\t\t\t\t\t\t\t\t\t\tid='company'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Nombre De Empresa'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.phone}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('company')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-4 mb-20 mb-xs-0'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='tel'\n\t\t\t\t\t\t\t\t\t\t\tname='ruc'\n\t\t\t\t\t\t\t\t\t\t\tid='ruc'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='RUC'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.phone}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('ruc')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-3 mb-20  mb-xs-0'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='tel'\n\t\t\t\t\t\t\t\t\t\t\tname='tetefono'\n\t\t\t\t\t\t\t\t\t\t\tid='tetefono'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Número telefónico'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.phone}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('phone')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<i className='fa fa-phone fa-2x campoform'></i>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-5 mb-20  mb-xs-0'>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\t\t\t\t\tclassName='input-sm bold'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\t\t\t\t\t\tpattern='.{3,100}'\n\t\t\t\t\t\t\t\t\t\t\tvalue={props.values.email}\n\t\t\t\t\t\t\t\t\t\t\tonChange={props.handleChange('email')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<i className='fa fa-envelope fa-2x campoform'></i>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-12 mb-20'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-mod btn-color btn-border-w btn-large btn-circle mb-20'\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleRegister}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\te Registrarme\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='col-md-12 mb-20'>\n\t\t\t\t\t\t\t\t\t\t<a href='#'>¿Olvidaste tu contraseña?</a>\n\t\t\t\t\t\t\t\t\t\t<p className='mt-20'>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\t\t\tid='inlineCheckbox1'\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='check'\n\t\t\t\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\t\t\t\tAl registrarte, aceptas nuestros{' '}\n\t\t\t\t\t\t\t\t\t\t\t<a href='#'>Términos y Condiciones</a> y{' '}\n\t\t\t\t\t\t\t\t\t\t\t<a href='#'>Políticas de usos de Datos</a>.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default CompanyReg;\n"]},"metadata":{},"sourceType":"module"}