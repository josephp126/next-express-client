{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport Axios from 'axios';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport getProfile from '../genericFunctions/getProfile';\nimport getAllTransactions from '../genericFunctions/getAllTransactions';\nimport sendMail from '../genericFunctions/sendMail';\nimport loggedUser from '../genericFunctions/loggedUser';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\n\nconst OperationHistory = props => {\n  const context = useContext(UserContext);\n  const token = Cookies.get('token');\n  const {\n    0: state,\n    1: setState\n  } = useState('');\n  const {\n    0: profileDetails,\n    1: setProfileDetails\n  } = useState('');\n\n  const init = async () => {\n    const id = await loggedUser(token);\n    const user = {\n      user: {\n        id: id\n      }\n    }; // console.log(user, 'xxxxxx');\n    // const data = await getAllTransactions(token, user);\n\n    const profile = await getProfile(token); // console.log(data);\n    // setState(data);\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleSubmit = (id, amountReceive, amountToPay, currencyTo, currencyFrom, status, operation) => {\n    confirmAlert({\n      title: 'Confirmar para enviar',\n      message: '¿Estás seguro de que quieres hacer esto?',\n      buttons: [{\n        label: 'Si',\n        onClick: async () => {\n          await changeStatus(token, id, amountReceive, amountToPay, currencyTo, currencyFrom, status);\n          await sendMail(token, operation.profileDetails.email, 'verify', operation);\n          NotificationManager.info('Estado cambiado', 'Title here');\n          init();\n        }\n      }, {\n        label: 'No',\n        onClick: () => console.log('Haga clic en no')\n      }]\n    });\n  };\n\n  if (state === '') {\n    return __jsx(\"div\", {\n      className: \"form-container w-100\"\n    }, __jsx(Loader, null));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(NotificationContainer, null), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'container main mt-5'\n  }, __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'row head'\n  }, __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-1'\n  }), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-2'\n  }, \"Nombre del banco\"), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-2'\n  }, \"N\\xFAmero de cuenta\"), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-2'\n  }, \"Cuenta a pagar\"), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-2'\n  }, \"Cantidad que recibir\\xE1s\"), __jsx(\"div\", {\n    className: \"jsx-136640067\" + \" \" + 'col-2'\n  }, \"Estado\")), __jsx(\"hr\", {\n    className: \"jsx-136640067\" + \" \" + 'hr'\n  }), state.map((operation, index) => {\n    // console.log(operation);\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'row'\n    }, __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, index + 1), __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-2'\n    }, operation.bankDetails.bankName), __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-2'\n    }, operation.bankDetails.accountNumber), __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, operation.transaction.amountToPay), __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, operation.transaction.currencyTo), __jsx(\"div\", {\n      style: {\n        overflow: 'hidden'\n      },\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, operation.transaction.amountReceive), __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, operation.transaction.currencyFrom), operation.transaction.status === 'Pago pendiente' ? __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-1'\n    }, operation.transaction.status), __jsx(\"button\", {\n      onClick: () => handleSubmit(operation._id, operation.transaction.amountReceive, operation.transaction.amountToPay, operation.transaction.currencyTo, operation.transaction.currencyFrom, 'Cantidad recibida', operation),\n      className: \"jsx-136640067\" + \" \" + 'btn btn-dark'\n    }, \"verificar pago\")) : __jsx(\"div\", {\n      className: \"jsx-136640067\" + \" \" + 'col-2'\n    }, operation.transaction.status)), __jsx(\"hr\", {\n      className: \"jsx-136640067\"\n    }));\n  })), __jsx(_JSXStyle, {\n    id: \"136640067\"\n  }, \"div.jsx-136640067{color:white;font-size:15px;}.head.jsx-136640067 div.jsx-136640067{font-size:18px;}hr.jsx-136640067{background:white;}.main.jsx-136640067{margin:0 auto;padding-top:80px;width:100%;height:120vh;color:white;}.scrollbar.jsx-136640067{margin-left:30px;float:left;height:300px;max-height:600px;width:65px;background:#f5f5f5;overflow-y:scroll;margin-bottom:25px;}#style-3.jsx-136640067::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,0.3);background-color:#f5f5f5;}#style-3.jsx-136640067::-webkit-scrollbar{width:6px;background-color:#f5f5f5;}#style-3.jsx-136640067::-webkit-scrollbar-thumb{background-color:#000000;border-width:1px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFx3b3JrXFxuZXh0LWV4cHJlc3NcXGNsaWVudFxcY29tcG9uZW50c1xcT3BlcmF0aW9uXFxPcGVyYXRpb25IaXN0b3J5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQThKZSxBQUdrQixBQUlHLEFBR0UsQUFHSCxBQVNHLEFBVW1DLEFBSzFDLEFBS2UsVUFKQSxFQWxDVixFQVVFLENBTmxCLEVBR0EsQUFZWSxRQW9CTSxFQXRDbEIsQ0FtQmMsR0FURixJQXdCWixNQWRrQixDQVRKLEFBNEJkLE9BWDBCLE1BaEJiLEdBU0QsU0FQWixFQVFvQixLQU9wQixjQU5tQixrQkFDQyxtQkFDcEIiLCJmaWxlIjoiRTpcXHdvcmtcXG5leHQtZXhwcmVzc1xcY2xpZW50XFxjb21wb25lbnRzXFxPcGVyYXRpb25cXE9wZXJhdGlvbkhpc3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBeGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgVXNlckNvbnRleHQgZnJvbSAnLi4vLi4vY29udGV4dC9Vc2VyQ29udGV4dCc7XG5pbXBvcnQgTG9hZGVyIGZyb20gJy4uL0xvYWRlcic7XG5pbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnO1xuaW1wb3J0IGdldFByb2ZpbGUgZnJvbSAnLi4vZ2VuZXJpY0Z1bmN0aW9ucy9nZXRQcm9maWxlJztcbmltcG9ydCBnZXRBbGxUcmFuc2FjdGlvbnMgZnJvbSAnLi4vZ2VuZXJpY0Z1bmN0aW9ucy9nZXRBbGxUcmFuc2FjdGlvbnMnO1xuaW1wb3J0IHNlbmRNYWlsIGZyb20gJy4uL2dlbmVyaWNGdW5jdGlvbnMvc2VuZE1haWwnO1xuaW1wb3J0IGxvZ2dlZFVzZXIgZnJvbSAnLi4vZ2VuZXJpY0Z1bmN0aW9ucy9sb2dnZWRVc2VyJztcblxuaW1wb3J0IHsgY29uZmlybUFsZXJ0IH0gZnJvbSAncmVhY3QtY29uZmlybS1hbGVydCc7XG5pbXBvcnQge1xuXHROb3RpZmljYXRpb25Db250YWluZXIsXG5cdE5vdGlmaWNhdGlvbk1hbmFnZXIsXG59IGZyb20gJ3JlYWN0LW5vdGlmaWNhdGlvbnMnO1xuXG5jb25zdCBPcGVyYXRpb25IaXN0b3J5ID0gcHJvcHMgPT4ge1xuXHRjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7XG5cdGNvbnN0IHRva2VuID0gQ29va2llcy5nZXQoJ3Rva2VuJyk7XG5cdGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoJycpO1xuXHRjb25zdCBbcHJvZmlsZURldGFpbHMsIHNldFByb2ZpbGVEZXRhaWxzXSA9IHVzZVN0YXRlKCcnKTtcblxuXHRjb25zdCBpbml0ID0gYXN5bmMgKCkgPT4ge1xuXHRcdGNvbnN0IGlkID0gYXdhaXQgbG9nZ2VkVXNlcih0b2tlbik7XG5cdFx0Y29uc3QgdXNlciA9IHtcblx0XHRcdHVzZXI6IHtcblx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0fSxcblx0XHR9O1xuXHRcdC8vIGNvbnNvbGUubG9nKHVzZXIsICd4eHh4eHgnKTtcblx0XHQvLyBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QWxsVHJhbnNhY3Rpb25zKHRva2VuLCB1c2VyKTtcblxuXHRcdGNvbnN0IHByb2ZpbGUgPSBhd2FpdCBnZXRQcm9maWxlKHRva2VuKTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdC8vIHNldFN0YXRlKGRhdGEpO1xuXHR9O1xuXG5cdHVzZUVmZmVjdCgoKSA9PiB7XG5cdFx0aW5pdCgpO1xuXHR9LCBbXSk7XG5cblx0Y29uc3QgaGFuZGxlU3VibWl0ID0gKFxuXHRcdGlkLFxuXHRcdGFtb3VudFJlY2VpdmUsXG5cdFx0YW1vdW50VG9QYXksXG5cdFx0Y3VycmVuY3lUbyxcblx0XHRjdXJyZW5jeUZyb20sXG5cdFx0c3RhdHVzLFxuXHRcdG9wZXJhdGlvblxuXHQpID0+IHtcblx0XHRjb25maXJtQWxlcnQoe1xuXHRcdFx0dGl0bGU6ICdDb25maXJtYXIgcGFyYSBlbnZpYXInLFxuXHRcdFx0bWVzc2FnZTogJ8K/RXN0w6FzIHNlZ3VybyBkZSBxdWUgcXVpZXJlcyBoYWNlciBlc3RvPycsXG5cdFx0XHRidXR0b25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogJ1NpJyxcblx0XHRcdFx0XHRvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRhd2FpdCBjaGFuZ2VTdGF0dXMoXG5cdFx0XHRcdFx0XHRcdHRva2VuLFxuXHRcdFx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRcdFx0YW1vdW50UmVjZWl2ZSxcblx0XHRcdFx0XHRcdFx0YW1vdW50VG9QYXksXG5cdFx0XHRcdFx0XHRcdGN1cnJlbmN5VG8sXG5cdFx0XHRcdFx0XHRcdGN1cnJlbmN5RnJvbSxcblx0XHRcdFx0XHRcdFx0c3RhdHVzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgc2VuZE1haWwoXG5cdFx0XHRcdFx0XHRcdHRva2VuLFxuXHRcdFx0XHRcdFx0XHRvcGVyYXRpb24ucHJvZmlsZURldGFpbHMuZW1haWwsXG5cdFx0XHRcdFx0XHRcdCd2ZXJpZnknLFxuXHRcdFx0XHRcdFx0XHRvcGVyYXRpb25cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHROb3RpZmljYXRpb25NYW5hZ2VyLmluZm8oJ0VzdGFkbyBjYW1iaWFkbycsICdUaXRsZSBoZXJlJyk7XG5cdFx0XHRcdFx0XHRpbml0KCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiAnTm8nLFxuXHRcdFx0XHRcdG9uQ2xpY2s6ICgpID0+IGNvbnNvbGUubG9nKCdIYWdhIGNsaWMgZW4gbm8nKSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSk7XG5cdH07XG5cblx0aWYgKHN0YXRlID09PSAnJykge1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nZm9ybS1jb250YWluZXIgdy0xMDAnPlxuXHRcdFx0XHQ8TG9hZGVyIC8+XG5cdFx0XHQ8L2Rpdj5cblx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIChcblx0XHQ8UmVhY3QuRnJhZ21lbnQ+XG5cdFx0XHQ8Tm90aWZpY2F0aW9uQ29udGFpbmVyIC8+XG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyIG1haW4gbXQtNSc+XG5cdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdyb3cgaGVhZCc+XG5cdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2NvbC0xJyAvPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMic+Tm9tYnJlIGRlbCBiYW5jbzwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMic+TsO6bWVybyBkZSBjdWVudGE8L2Rpdj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nY29sLTInPkN1ZW50YSBhIHBhZ2FyPC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2NvbC0yJz5DYW50aWRhZCBxdWUgcmVjaWJpcsOhczwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMic+RXN0YWRvPC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8aHIgY2xhc3NOYW1lPSdocicgLz5cblxuXHRcdFx0XHR7LyogPGRpdiBjbGFzc05hbWU9XCJzY3JvbGxiYXJcIiBpZD1cInN0eWxlLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcmNlLW92ZXJmbG93XCI+ICovfVxuXHRcdFx0XHR7c3RhdGUubWFwKChvcGVyYXRpb24sIGluZGV4KSA9PiB7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2cob3BlcmF0aW9uKTtcblx0XHRcdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRcdFx0PFJlYWN0LkZyYWdtZW50IGtleT17aW5kZXh9PlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0ncm93Jz5cblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nY29sLTEnPntpbmRleCArIDF9PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2NvbC0yJz57b3BlcmF0aW9uLmJhbmtEZXRhaWxzLmJhbmtOYW1lfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMic+XG5cdFx0XHRcdFx0XHRcdFx0XHR7b3BlcmF0aW9uLmJhbmtEZXRhaWxzLmFjY291bnROdW1iZXJ9XG5cdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2NvbC0xJz57b3BlcmF0aW9uLnRyYW5zYWN0aW9uLmFtb3VudFRvUGF5fTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMSc+e29wZXJhdGlvbi50cmFuc2FjdGlvbi5jdXJyZW5jeVRvfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgc3R5bGU9e3sgb3ZlcmZsb3c6ICdoaWRkZW4nIH19IGNsYXNzTmFtZT0nY29sLTEnPlxuXHRcdFx0XHRcdFx0XHRcdFx0e29wZXJhdGlvbi50cmFuc2FjdGlvbi5hbW91bnRSZWNlaXZlfVxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdjb2wtMSc+XG5cdFx0XHRcdFx0XHRcdFx0XHR7b3BlcmF0aW9uLnRyYW5zYWN0aW9uLmN1cnJlbmN5RnJvbX1cblx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblxuXHRcdFx0XHRcdFx0XHRcdHtvcGVyYXRpb24udHJhbnNhY3Rpb24uc3RhdHVzID09PSAnUGFnbyBwZW5kaWVudGUnID8gKFxuXHRcdFx0XHRcdFx0XHRcdFx0PFJlYWN0LkZyYWdtZW50PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nY29sLTEnPntvcGVyYXRpb24udHJhbnNhY3Rpb24uc3RhdHVzfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPSdidG4gYnRuLWRhcmsnXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b25DbGljaz17KCkgPT5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhhbmRsZVN1Ym1pdChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3BlcmF0aW9uLl9pZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3BlcmF0aW9uLnRyYW5zYWN0aW9uLmFtb3VudFJlY2VpdmUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wZXJhdGlvbi50cmFuc2FjdGlvbi5hbW91bnRUb1BheSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3BlcmF0aW9uLnRyYW5zYWN0aW9uLmN1cnJlbmN5VG8sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wZXJhdGlvbi50cmFuc2FjdGlvbi5jdXJyZW5jeUZyb20sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCdDYW50aWRhZCByZWNpYmlkYScsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wZXJhdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZlcmlmaWNhciBwYWdvXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9SZWFjdC5GcmFnbWVudD5cblx0XHRcdFx0XHRcdFx0XHQpIDogKFxuXHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2NvbC0yJz57b3BlcmF0aW9uLnRyYW5zYWN0aW9uLnN0YXR1c308L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHQpfVxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0PGhyIC8+XG5cdFx0XHRcdFx0XHQ8L1JlYWN0LkZyYWdtZW50PlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pfVxuXHRcdFx0PC9kaXY+XG5cdFx0XHR7LyogPC9kaXY+ICovfVxuXHRcdFx0PHN0eWxlIGpzeD57YFxuXHRcdFx0XHRkaXYge1xuXHRcdFx0XHRcdGNvbG9yOiB3aGl0ZTtcblx0XHRcdFx0XHRmb250LXNpemU6IDE1cHg7XG5cdFx0XHRcdH1cblx0XHRcdFx0LmhlYWQgZGl2IHtcblx0XHRcdFx0XHRmb250LXNpemU6IDE4cHg7XG5cdFx0XHRcdH1cblx0XHRcdFx0aHIge1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHdoaXRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC5tYWluIHtcblx0XHRcdFx0XHRtYXJnaW46IDAgYXV0bztcblx0XHRcdFx0XHRwYWRkaW5nLXRvcDogODBweDtcblx0XHRcdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdFx0XHRoZWlnaHQ6IDEyMHZoO1xuXHRcdFx0XHRcdGNvbG9yOiB3aGl0ZTtcblx0XHRcdFx0XHQvLyBvdmVyZmxvdy15OiBzY3JvbGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuc2Nyb2xsYmFyIHtcblx0XHRcdFx0XHRtYXJnaW4tbGVmdDogMzBweDtcblx0XHRcdFx0XHRmbG9hdDogbGVmdDtcblx0XHRcdFx0XHRoZWlnaHQ6IDMwMHB4O1xuXHRcdFx0XHRcdG1heC1oZWlnaHQ6IDYwMHB4O1xuXHRcdFx0XHRcdHdpZHRoOiA2NXB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6ICNmNWY1ZjU7XG5cdFx0XHRcdFx0b3ZlcmZsb3cteTogc2Nyb2xsO1xuXHRcdFx0XHRcdG1hcmdpbi1ib3R0b206IDI1cHg7XG5cdFx0XHRcdH1cblx0XHRcdFx0I3N0eWxlLTM6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcblx0XHRcdFx0XHQtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMCA2cHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuXHRcdFx0XHRcdGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQjc3R5bGUtMzo6LXdlYmtpdC1zY3JvbGxiYXIge1xuXHRcdFx0XHRcdHdpZHRoOiA2cHg7XG5cdFx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCNzdHlsZS0zOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDtcblx0XHRcdFx0XHRib3JkZXItd2lkdGg6IDFweDtcblx0XHRcdFx0fVxuXHRcdFx0YH08L3N0eWxlPlxuXHRcdFx0ey8qIDwvZGl2PiAqL31cblx0XHQ8L1JlYWN0LkZyYWdtZW50PlxuXHQpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgT3BlcmF0aW9uSGlzdG9yeTtcblxuY29uc3QgY2hhbmdlU3RhdHVzID0gYXN5bmMgKFxuXHR0b2tlbixcblx0aWQsXG5cdGFtb3VudFJlY2VpdmUsXG5cdGFtb3VudFRvUGF5LFxuXHRjdXJyZW5jeVRvLFxuXHRjdXJyZW5jeUZyb20sXG5cdHN0YXR1c1xuKSA9PiB7XG5cdGNvbnN0IGJvZHkgPSB7XG5cdFx0dHJhbnNhY3Rpb246IHtcblx0XHRcdGFtb3VudFJlY2VpdmUsXG5cdFx0XHRhbW91bnRUb1BheSxcblx0XHRcdGN1cnJlbmN5VG8sXG5cdFx0XHRjdXJyZW5jeUZyb20sXG5cdFx0XHRzdGF0dXMsXG5cdFx0fSxcblx0fTtcblx0Y29uc3QgaGVhZGVyID0ge1xuXHRcdGhlYWRlcnM6IHtcblx0XHRcdCd4LWF1dGgtdG9rZW4nOiB0b2tlbixcblx0XHR9LFxuXHR9O1xuXHRjb25zdCByZXMgPSBhd2FpdCBBeGlvcy5wdXQoXG5cdFx0J2h0dHBzOi8vYXBpLm1vbmkucGUvYXBpL29wZXJhdGlvbnMvJyArIGlkLFxuXHRcdGJvZHksXG5cdFx0aGVhZGVyXG5cdCk7XG5cdHJldHVybiByZXMuZGF0YTtcbn07XG4iXX0= */\\n/*@ sourceURL=E:\\\\\\\\work\\\\\\\\next-express\\\\\\\\client\\\\\\\\components\\\\\\\\Operation\\\\\\\\OperationHistory.js */\"));\n};\n\nexport default OperationHistory;\n\nconst changeStatus = async (token, id, amountReceive, amountToPay, currencyTo, currencyFrom, status) => {\n  const body = {\n    transaction: {\n      amountReceive,\n      amountToPay,\n      currencyTo,\n      currencyFrom,\n      status\n    }\n  };\n  const header = {\n    headers: {\n      'x-auth-token': token\n    }\n  };\n  const res = await Axios.put('https://api.moni.pe/api/operations/' + id, body, header);\n  return res.data;\n};","map":{"version":3,"sources":["E:/work/next-express/client/components/Operation/OperationHistory.js"],"names":["React","useEffect","useState","useContext","Axios","UserContext","Loader","Cookies","getProfile","getAllTransactions","sendMail","loggedUser","confirmAlert","NotificationContainer","NotificationManager","OperationHistory","props","context","token","get","state","setState","profileDetails","setProfileDetails","init","id","user","profile","handleSubmit","amountReceive","amountToPay","currencyTo","currencyFrom","status","operation","title","message","buttons","label","onClick","changeStatus","email","info","console","log","map","index","bankDetails","bankName","accountNumber","transaction","overflow","_id","body","header","headers","res","put","data"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Axios from 'axios';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport getProfile from '../genericFunctions/getProfile';\nimport getAllTransactions from '../genericFunctions/getAllTransactions';\nimport sendMail from '../genericFunctions/sendMail';\nimport loggedUser from '../genericFunctions/loggedUser';\n\nimport { confirmAlert } from 'react-confirm-alert';\nimport {\n\tNotificationContainer,\n\tNotificationManager,\n} from 'react-notifications';\n\nconst OperationHistory = props => {\n\tconst context = useContext(UserContext);\n\tconst token = Cookies.get('token');\n\tconst [state, setState] = useState('');\n\tconst [profileDetails, setProfileDetails] = useState('');\n\n\tconst init = async () => {\n\t\tconst id = await loggedUser(token);\n\t\tconst user = {\n\t\t\tuser: {\n\t\t\t\tid: id,\n\t\t\t},\n\t\t};\n\t\t// console.log(user, 'xxxxxx');\n\t\t// const data = await getAllTransactions(token, user);\n\n\t\tconst profile = await getProfile(token);\n\n\t\t// console.log(data);\n\t\t// setState(data);\n\t};\n\n\tuseEffect(() => {\n\t\tinit();\n\t}, []);\n\n\tconst handleSubmit = (\n\t\tid,\n\t\tamountReceive,\n\t\tamountToPay,\n\t\tcurrencyTo,\n\t\tcurrencyFrom,\n\t\tstatus,\n\t\toperation\n\t) => {\n\t\tconfirmAlert({\n\t\t\ttitle: 'Confirmar para enviar',\n\t\t\tmessage: '¿Estás seguro de que quieres hacer esto?',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Si',\n\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\tawait changeStatus(\n\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tamountReceive,\n\t\t\t\t\t\t\tamountToPay,\n\t\t\t\t\t\t\tcurrencyTo,\n\t\t\t\t\t\t\tcurrencyFrom,\n\t\t\t\t\t\t\tstatus\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait sendMail(\n\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\toperation.profileDetails.email,\n\t\t\t\t\t\t\t'verify',\n\t\t\t\t\t\t\toperation\n\t\t\t\t\t\t);\n\t\t\t\t\t\tNotificationManager.info('Estado cambiado', 'Title here');\n\t\t\t\t\t\tinit();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: () => console.log('Haga clic en no'),\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t};\n\n\tif (state === '') {\n\t\treturn (\n\t\t\t<div className='form-container w-100'>\n\t\t\t\t<Loader />\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<NotificationContainer />\n\t\t\t<div className='container main mt-5'>\n\t\t\t\t<div className='row head'>\n\t\t\t\t\t<div className='col-1' />\n\t\t\t\t\t<div className='col-2'>Nombre del banco</div>\n\t\t\t\t\t<div className='col-2'>Número de cuenta</div>\n\t\t\t\t\t<div className='col-2'>Cuenta a pagar</div>\n\t\t\t\t\t<div className='col-2'>Cantidad que recibirás</div>\n\t\t\t\t\t<div className='col-2'>Estado</div>\n\t\t\t\t</div>\n\t\t\t\t<hr className='hr' />\n\n\t\t\t\t{/* <div className=\"scrollbar\" id=\"style-3\">\n          <div className=\"force-overflow\"> */}\n\t\t\t\t{state.map((operation, index) => {\n\t\t\t\t\t// console.log(operation);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t\t<div className='col-1'>{index + 1}</div>\n\t\t\t\t\t\t\t\t<div className='col-2'>{operation.bankDetails.bankName}</div>\n\t\t\t\t\t\t\t\t<div className='col-2'>\n\t\t\t\t\t\t\t\t\t{operation.bankDetails.accountNumber}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-1'>{operation.transaction.amountToPay}</div>\n\t\t\t\t\t\t\t\t<div className='col-1'>{operation.transaction.currencyTo}</div>\n\t\t\t\t\t\t\t\t<div style={{ overflow: 'hidden' }} className='col-1'>\n\t\t\t\t\t\t\t\t\t{operation.transaction.amountReceive}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-1'>\n\t\t\t\t\t\t\t\t\t{operation.transaction.currencyFrom}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{operation.transaction.status === 'Pago pendiente' ? (\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<div className='col-1'>{operation.transaction.status}</div>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-dark'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit(\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation._id,\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation.transaction.amountReceive,\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation.transaction.amountToPay,\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation.transaction.currencyTo,\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation.transaction.currencyFrom,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Cantidad recibida',\n\t\t\t\t\t\t\t\t\t\t\t\t\toperation\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tverificar pago\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className='col-2'>{operation.transaction.status}</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{/* </div> */}\n\t\t\t<style jsx>{`\n\t\t\t\tdiv {\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tfont-size: 15px;\n\t\t\t\t}\n\t\t\t\t.head div {\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t}\n\t\t\t\thr {\n\t\t\t\t\tbackground: white;\n\t\t\t\t}\n\t\t\t\t.main {\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\tpadding-top: 80px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 120vh;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\t// overflow-y: scroll;\n\t\t\t\t}\n\n\t\t\t\t.scrollbar {\n\t\t\t\t\tmargin-left: 30px;\n\t\t\t\t\tfloat: left;\n\t\t\t\t\theight: 300px;\n\t\t\t\t\tmax-height: 600px;\n\t\t\t\t\twidth: 65px;\n\t\t\t\t\tbackground: #f5f5f5;\n\t\t\t\t\toverflow-y: scroll;\n\t\t\t\t\tmargin-bottom: 25px;\n\t\t\t\t}\n\t\t\t\t#style-3::-webkit-scrollbar-track {\n\t\t\t\t\t-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t}\n\n\t\t\t\t#style-3::-webkit-scrollbar {\n\t\t\t\t\twidth: 6px;\n\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t}\n\n\t\t\t\t#style-3::-webkit-scrollbar-thumb {\n\t\t\t\t\tbackground-color: #000000;\n\t\t\t\t\tborder-width: 1px;\n\t\t\t\t}\n\t\t\t`}</style>\n\t\t\t{/* </div> */}\n\t\t</React.Fragment>\n\t);\n};\n\nexport default OperationHistory;\n\nconst changeStatus = async (\n\ttoken,\n\tid,\n\tamountReceive,\n\tamountToPay,\n\tcurrencyTo,\n\tcurrencyFrom,\n\tstatus\n) => {\n\tconst body = {\n\t\ttransaction: {\n\t\t\tamountReceive,\n\t\t\tamountToPay,\n\t\t\tcurrencyTo,\n\t\t\tcurrencyFrom,\n\t\t\tstatus,\n\t\t},\n\t};\n\tconst header = {\n\t\theaders: {\n\t\t\t'x-auth-token': token,\n\t\t},\n\t};\n\tconst res = await Axios.put(\n\t\t'https://api.moni.pe/api/operations/' + id,\n\t\tbody,\n\t\theader\n\t);\n\treturn res.data;\n};\n"]},"metadata":{},"sourceType":"module"}