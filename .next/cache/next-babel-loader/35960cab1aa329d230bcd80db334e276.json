{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport Axios from 'axios';\nimport BankAccountsEdit from './BankAccountsEdit';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { withRouter } from 'next/router';\n\nconst BankAccountsView = () => {\n  const {\n    0: bankName,\n    1: setBankName\n  } = useState('');\n  const {\n    0: currencyType,\n    1: setCurrencyType\n  } = useState('');\n  const {\n    0: accountType,\n    1: SetAccountType\n  } = useState('');\n  const {\n    0: accountNumber,\n    1: setAccountNumber\n  } = useState('');\n  const {\n    0: nickname,\n    1: setNickname\n  } = useState('');\n  const {\n    state,\n    addToken,\n    addName\n  } = useContext(UserContext);\n  const {\n    0: banks,\n    1: setBanks\n  } = useState('');\n  const {\n    0: showEdit,\n    1: setShowEdit\n  } = useState(false);\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert,\n    alerts\n  } = alertContext;\n  const {\n    0: data,\n    1: setData\n  } = useState('');\n  const {\n    0: editRequest,\n    1: setEditRequest\n  } = useState('');\n\n  const init = async () => {\n    try {\n      const header = {\n        headers: {\n          'x-auth-token': Cookies.get('token')\n        }\n      };\n      const res = await Axios.get('https://api.moni.pe/api/accounts/', header);\n      setBanks(res.data);\n    } catch (error) {\n      setAlert('Por favor inicie sesión para continuar', 'danger');\n      Router.push('/login');\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleEdit = (data, request) => {\n    // console.log('da', data._id);\n    setData(data);\n    setEditRequest(request); // console.log(editRequest);\n\n    setShowEdit(!showEdit);\n    init();\n  };\n\n  if (showEdit === true) {\n    {\n      return __jsx(BankAccountsEdit, {\n        data: data,\n        handleShowEdit: handleEdit,\n        state: showEdit,\n        request: editRequest\n      });\n    }\n  }\n\n  if (banks === '') {\n    return __jsx(\"div\", {\n      className: \"form-container w-100\"\n    }, __jsx(\"h2\", null, __jsx(Loader, null)));\n  }\n\n  return __jsx(\"div\", {\n    className: \"form-container w-100\"\n  }, __jsx(\"h2\", {\n    className: \"mb-5\"\n  }, \"Detalles de cuenta bancaria\"), banks.map((data, index) => {\n    return __jsx(React.Fragment, {\n      key: index\n    }, __jsx(\"div\", {\n      className: \"row mt-4\"\n    }, __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"N\\xFAmero de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.accountNumber))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.type))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Nombre del banco\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, data.bankName))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Due\\xF1o de cuenta\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.nickname || ''))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Tipo de moneda\"), __jsx(\"p\", {\n      className: \"ml-3\"\n    }, \" \", data.currency))), __jsx(\"div\", {\n      className: \"col-md-2 \"\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"button\", {\n      className: \"mt-4 mb-0 btn blue-btn\",\n      onClick: () => handleEdit(data, 'edit')\n    }, \"Editar\")))));\n  }), __jsx(\"button\", {\n    className: \"btn outline-btn mt-5 btn-long\",\n    onClick: () => handleEdit('', 'add')\n  }, \"Agregar cuenta bancaria\"));\n};\n\nexport default BankAccountsView;","map":{"version":3,"sources":["E:/work/next-express/client/components/Operation/BankAccountsView.js"],"names":["React","useState","useEffect","useContext","Axios","BankAccountsEdit","UserContext","Loader","Cookies","AlertContext","Router","withRouter","BankAccountsView","bankName","setBankName","currencyType","setCurrencyType","accountType","SetAccountType","accountNumber","setAccountNumber","nickname","setNickname","state","addToken","addName","banks","setBanks","showEdit","setShowEdit","alertContext","setAlert","alerts","data","setData","editRequest","setEditRequest","init","header","headers","get","res","error","push","handleEdit","request","map","index","type","currency"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport Axios from 'axios';\nimport BankAccountsEdit from './BankAccountsEdit';\nimport UserContext from '../../context/UserContext';\nimport Loader from '../Loader';\nimport Cookies from 'js-cookie';\nimport AlertContext from '../../context/alert/alertContext';\nimport Router, { withRouter } from 'next/router';\n\nconst BankAccountsView = () => {\n\tconst [bankName, setBankName] = useState('');\n\tconst [currencyType, setCurrencyType] = useState('');\n\tconst [accountType, SetAccountType] = useState('');\n\tconst [accountNumber, setAccountNumber] = useState('');\n\tconst [nickname, setNickname] = useState('');\n\tconst { state, addToken, addName } = useContext(UserContext);\n\tconst [banks, setBanks] = useState('');\n\tconst [showEdit, setShowEdit] = useState(false);\n\tconst alertContext = useContext(AlertContext);\n\tconst { setAlert, alerts } = alertContext;\n\tconst [data, setData] = useState('');\n\n\tconst [editRequest, setEditRequest] = useState('');\n\n\tconst init = async () => {\n\t\ttry {\n\t\t\tconst header = {\n\t\t\t\theaders: {\n\t\t\t\t\t'x-auth-token': Cookies.get('token'),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst res = await Axios.get('https://api.moni.pe/api/accounts/', header);\n\t\t\tsetBanks(res.data);\n\t\t} catch (error) {\n\t\t\tsetAlert('Por favor inicie sesión para continuar', 'danger');\n\t\t\tRouter.push('/login');\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tinit();\n\t}, []);\n\n\tconst handleEdit = (data, request) => {\n\t\t// console.log('da', data._id);\n\t\tsetData(data);\n\t\tsetEditRequest(request);\n\t\t// console.log(editRequest);\n\t\tsetShowEdit(!showEdit);\n\t\tinit();\n\t};\n\n\tif (showEdit === true) {\n\t\t{\n\t\t\treturn (\n\t\t\t\t<BankAccountsEdit\n\t\t\t\t\tdata={data}\n\t\t\t\t\thandleShowEdit={handleEdit}\n\t\t\t\t\tstate={showEdit}\n\t\t\t\t\trequest={editRequest}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\tif (banks === '') {\n\t\treturn (\n\t\t\t<div className='form-container w-100'>\n\t\t\t\t<h2>\n\t\t\t\t\t<Loader />\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className='form-container w-100'>\n\t\t\t<h2 className='mb-5'>Detalles de cuenta bancaria</h2>\n\n\t\t\t{banks.map((data, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t<div className='row mt-4'>\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<label>Número de cuenta</label>\n\t\t\t\t\t\t\t\t\t<p className='ml-3'>{data.accountNumber}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<label>Tipo de cuenta</label>\n\t\t\t\t\t\t\t\t\t<p className='ml-3'>{data.type}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<label>Nombre del banco</label>\n\t\t\t\t\t\t\t\t\t<p className='ml-3'>{data.bankName}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<label>Dueño de cuenta</label>\n\t\t\t\t\t\t\t\t\t<p className='ml-3'> {data.nickname || ''}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<label>Tipo de moneda</label>\n\t\t\t\t\t\t\t\t\t<p className='ml-3'> {data.currency}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='col-md-2 '>\n\t\t\t\t\t\t\t\t<div className='form-group'>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='mt-4 mb-0 btn blue-btn'\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleEdit(data, 'edit')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tEditar\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<button\n\t\t\t\tclassName='btn outline-btn mt-5 btn-long'\n\t\t\t\tonClick={() => handleEdit('', 'add')}\n\t\t\t>\n\t\t\t\tAgregar cuenta bancaria\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default BankAccountsView;\n"]},"metadata":{},"sourceType":"module"}